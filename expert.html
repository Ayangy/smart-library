<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>湖北智库-智库专家</title>
		<link rel="stylesheet" href="css/style.css">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
	</head>

	<body>
		<div class="top_nav">
			<ul class="top_nav_center">
				<li class="top_nav_icon webo_icon">
					<a href="https://weibo.com/#_loginLayer_1513155457173"></a>
				</li>
				<li class="top_nav_icon wechat_icon">
					<a href="#"></a>
				</li>
				<li class="top_nav_search">
					<a class="btn-search border-radius5 right" onclick="searchByContentValue()">搜索</a>
					<input type="text" class="input-230 border-radius5 right" placeholder="请输入关键字">
				</li>
				<li class="language_icon">
					<a href="#">English</a>
				</li>
				<li class="login_icon">
					<a href="#">登录</a>
				</li>
				<li class="register_icon">
					<a href="register.html">注册</a>
				</li>
			</ul>
		</div>
		<div class="index-logo">
			<div class="container clearfix">
				<div class="logo_left">
					<a href="index.html" class="top_logo"></a>
					<div class="center_url">
						<span class="zkurl">www.hbzhiku.org.cn</span>
						<span class="zkduty"></span>
					</div>
					<div class="bottom_slogan">湖北省社会科学院主办 </div>
				</div>
				<div class="banner_right">
					<img />
				</div>
			</div>
		</div>
		<div class="navbar">
			<div class="container" id="container">
				<ul>
					<li><a href="zkywList.html">智库动态</a></li>
					<li><a href="hotspots.html">决策热点</a></li>
					<li><a href="decision.html">决策调研</a></li>
					<li><a href="forum.html">智库论坛</a></li>
					<li><a href="expert.html" class="current">智库专家</a></li>
					<li><a href="organizationHome.html">智库机构</a></li>
					<li><a href="achievements.html">智库成果</a></li>
					<li><a href="union.html">智库联盟</a></li>
					<li><a href="database.html">数据库</a></li>
				</ul>
			</div>
		</div>

		<div class="listContent">
			<div class="leftMenu" id="leftMenu">
				<ul>
					<li><a href="##" class="current">智库专家</a></li>
				</ul>
			</div>
			<div class="listRight">
				<div class="listNavbar" id="listNavbar">您当前位置：智库专家</div>
				<div class="ach-search org-search expert-search">
					<label>专家查询：</label>
					<input type="text" class="border-radius3 mr10" placeholder="" id="expertSelectTextField">
					<span class="border-radiusAll radio" id="expertName"></span>
					<label class="pr20">专家姓名</label>
					<span class="border-radiusAll radio" id="research"></span>
					<label class="pr20">研究领域</label>
					<span class="border-radiusAll radio" id="organizationName"></span>
					<label class="pr20">所在部门</label>
					<!--<input type="text" class="border-radius3 mr10 bgnone" placeholder="所属类型">-->
					<a href="##" class="submit border-radius5 relative" style="width:40px;height:30px;line-height:30px;top:1px;" id="submit-Search-btn">查询</a>
				</div>
				<div class="org-letter">
					<span>全部</span>
					<a>A</a>
					<a>B</a>
					<a>C</a>
					<a>D</a>
					<a>E</a>
					<a>F</a>
					<a>G</a>
					<a>H</a>
					<a>I</a>
					<a>J</a>
					<a>K</a>
					<a>L</a>
					<a>M</a>
					<a>N</a>
					<a>O</a>
					<a>P</a>
					<a>Q</a>
					<a>R</a>
					<a>S</a>
					<a>T</a>
					<a>U</a>
					<a>V</a>
					<a>W</a>
					<a>X</a>
					<a>Y</a>
					<a>Z</a>
				</div>
				<div class="org-search-result">
					<ol id="line-spe-china">
					</ol>
				</div>
				<div class="backTopOut" style="text-align: center;cursor: pointer;margin-top: 50px;"><img onclick="backTopEvent()" id="backTop" src="img/backTop1.png" style="width: 120px;" />&nbsp;&nbsp;
					<a href="index.html"><img id="backHome" src="img/backHome1.png" style="width: 120px;" /></a>
				</div>

			</div>
		</div>
		<div class="footer">
			<div class="container relative">
				<img class="logomap" src="img/bot.gif" />
				<img class="logo" src="img/bottom-logo1.gif" />
				<div class="foonterMain">
					<p>鄂ICP备13008287号&#169;2017 湖北省社会科学院 All Rights Reserved</p>
					<p>地址：中国湖北武汉东湖路165号 湖北智库网（站）电话：027-86792500 </p>
				</div>
				<div class="ewm"><img src="img/ewm.gif">微信公众号</div>
			</div>
		</div>
		<!--登录盒子-->
		<div class="login-bg">
			<ul class="login-box">
				<li class="login-title">
					<span>欢迎登录湖北智库网</span>
					<span class="close-icon"></span>
				</li>
				<li class="login-username">
					<span>用户名：</span>
					<input id="username" type="text" placeholder="" />
				</li>
				<li>
					<span>密&nbsp;码：</span>
					<input id="password" type="text" />
				</li>
				<li>
					<span class="code">验证码：</span>
					<input id="codeinpts" class="codeinpt" type="text" />
					<img id="loginImg" src="img/code.gif" />
					<img id="newloginImg" class="new" src="img/new.gif" />
					<a class="forgetpw" href="findpassword.html">忘记密码?</a>
				</li>
				<li>
					<input id="loginbtn" type="button" value="登录" />
					<input id="cancelbtn" type="button" value="取消" />
				</li>
				<li class="login-tips"></li>
			</ul>
		</div>
	</body>
	<script src="js/jquery.min.js"></script>
	<script src="js/HomePage/HomePageManager.js"></script>
	<script src="js/findExpertByLetter.js"></script>
	<script src="js/ArticleSortManager.js"></script>
	<script>
		var letterObject;
		var parentId = 0;

		function loadHtmlContent(letter) {};
		$(function() {
			$('.org-letter span').click(function() {
				loadHtmlContent(null);
			})
			$('.org-letter a').click(function() {
				var txt = $(this).text();
				loadHtmlContent(txt);
			})
			var type = "";
			$('#expertName').click(function() {
				type = "name";
				if ($(this).children().length > 0) $(this).children().remove();
				else {
					$(this).append('<em class="border-radiusAll"></em>');
					$('#research').children().remove();
					$('#organizationName').children().remove();
				}
			})
			$('#research').click(function() {
				type = "research";
				if ($(this).children().length > 0) $(this).children().remove();
				else {
					$(this).append('<em class="border-radiusAll"></em>');
					$('#expertName').children().remove();
					$('#organizationName').children().remove();
				}
			})
			$('#organizationName').click(function() {
				type = "organizationName";
				if ($(this).children().length > 0) $(this).children().remove();
				else {
					$(this).append('<em class="border-radiusAll"></em>');
					$('#research').children().remove();
					$('#expertName').children().remove();
				}
			})
			$('#submit-Search-btn').click(function() {
				var val = $('#expertSelectTextField').val();
				if (val == "") {
					$('#expertSelectTextField').attr("placeholder", "请输入查询条件");
					return false;
				} else {
					selectExpertByCondition(type, val);
				}
			})
		})

		function letterNameClickEvent(event, objc, subid) {
			//        var text = objc.textContent;
			//        var urlMessage = window.location.hash;
			//        urlMessage = urlMessage.substring(2,urlMessage.length);
			//        urlMessage = urlMessage.split("&");
			//
			//        letterContent = null;
			//        for(var i in letterObject){
			//            if (letterContent != null) break;
			//            var objArr = letterObject[i];
			//            if (objArr.length == 0 || i != urlMessage[1]) continue;
			//            for(var j = 0; j < objArr.length; j++){
			//                var subObj = objArr[j];
			//                if (subObj.name == text && subObj.id == urlMessage[0]) {
			//                    letterContent = subObj;
			//                    break;
			//                }
			//            }
			//        }
			////        localStorage.setItem("letterContent",JSON.stringify(letterContent));
			//        window.location.href = "expert-details.html?"+urlMessage[0];
			window.location.href = "expert-details.html?" + subid;
		}

		function selectExpertByCondition(field, keyword) {
			findExpertByCondition(field, keyword, function(result) {
				if (result == null) {
					document.getElementById("line-spe-china").innerHTML = '';
				}
				letterObject = result;
				var length = function() {
					var count = 0;
					for (var i in result) {
						count++;
					}
					return count;
				};
				if (length() > 0) {
					var contentChina = '';
					var contentFremdness = '';
					for (var i in result) {
						var objArr = result[i];
						if (objArr.length == 0) {
							continue;
						}
						var haveChina = false;
						var haveFremdness = false;
						contentChina += '<li><span>' + i + '</span>';
						contentFremdness += '<li><span>' + i + '</span>';
						for (var j = 0; j < objArr.length; j++) {
							var subObj = objArr[j];
							if (subObj.type == 0) {
								contentChina += '<a href="##' + subObj.id + '&' + i + '" onclick="letterNameClickEvent(event, this,' + subObj.id + ')">' + subObj.name + '</a>';
								haveChina = true;
							} else {
								contentFremdness += '<a href="##' + subObj.id + '&' + i + '" onclick="letterNameClickEvent(event, this,' + subObj.id + ')">' + subObj.name + '</a>';
								haveFremdness = true;
							}
						}
						contentChina += '</li>';
						contentFremdness += '</li>';
						if (!haveChina) contentChina = '';
						if (!haveFremdness) contentFremdness = '';
					}
					if (contentChina.length > 0) document.getElementById("line-spe-china").innerHTML = contentChina;
					if (contentFremdness.length > 0) document.getElementById("line-spe-china").innerHTML = contentFremdness;
				}
			});
		}
		var findChinaExpert = function(letter) {
			findExpertByLetter(letter, 0, function(result) {
				document.getElementById("line-spe-china").innerHTML = '';
				letterObject = result;
				var length = function() {
					var count = 0;
					for (var i in result) {
						count++;
					}
					return count;
				};
				if (length() > 0) {
					var content = '';
					for (var i in result) {
						var objArr = result[i];
						if (objArr.length == 0) {
							continue;
						}
						content += '<li><span>' + i + '</span>';
						for (var j = 0; j < objArr.length; j++) {
							var subObj = objArr[j];
							content += '<a href="##' + subObj.id + '&' + i + '" onclick="letterNameClickEvent(event, this,' + subObj.id + ')">' + subObj.name + '</a>';
						}
						content += '</li>';
					}
					if (content.length > 0) {
						document.getElementById("line-spe-china").innerHTML = content;
					}
				}
			});
		}
		var findfremdnessExpert = function(letter) {
			findExpertByLetter(letter, 1, function(result) {
				document.getElementById("line-spea-fremdness").innerHTML = '';
				letterObject = result;
				var length = function() {
					var count = 0;
					for (var i in result) {
						count++;
					}
					return count;
				};
				if (length() > 0) {
					var content = '';
					for (var i in result) {
						var objArr = result[i];
						if (objArr.length == 0) {
							continue;
						}
						content += '<li><span>' + i + '</span>';
						for (var j = 0; j < objArr.length; j++) {
							var subObj = objArr[j];
							content += '<a href="##' + subObj.id + '&' + i + '" onclick="letterNameClickEvent(event, this,' + subObj.id + ')">' + subObj.name + '</a>';
						}
						content += '</li>';
					}
					if (content.length > 0) {
						document.getElementById("line-spea-fremdness").innerHTML = content;
					}
				}
			});
		}
		var getLeftMenumList = function() {
			getArticleSonSort(parentId, function(result) {
				if (result != null) {
					sonsortArr = result;
					for (var i = 0; i < sonsortArr.length; i++) {
						var subObj = sonsortArr[i];
						if (subObj.name == document.title) {
							parentId = subObj.id;
							break;
						}
					}
					getArticleSonSort(parentId, function(result) {
						if (result != null) {
							subSonSortArr = result;
							var content = '<ul>';
							for (var i = 0; i < result.length; i++) {
								var subObj = result[i];
								content += '<li><a href="##' + subObj.id + '" onclick="leftMenuClickEvent(event, this,' + subObj.id + ')"' + (i == 0 ? ' class="current">' : '>') + subObj.name + '</a></li>';
							}
							content += '</ul>';
							document.getElementById("leftMenu").innerHTML = content;
							leftMenuClickEvent(null, null);
						}
					});
				}
			});
		}

		function loadHtmlContent(letter) {
			findChinaExpert(letter);
		}
		loadHtmlContent(null);

		function leftMenuClickEvent(event, obj, subid) {
			var title = '智库专家';
			if (obj != null) {
				for (var i = 0; i < obj.parentElement.parentElement.childElementCount; i++) {
					var aobj = obj.parentElement.parentElement.children[i].children[0];
					aobj.className = null;
					if (obj == aobj) {
						continue;
					}
				}
				obj.className = "current";
				document.getElementsByClassName("listNavbar")[0].textContent = "您当前位置：智库论坛  > " + obj.textContent;
				title = obj.textContent;
			}
			subId = subid;
			document.getElementById("line-spe-china").innerHTML = '';
			//        $('.listRight div[class = "pages"]')[0].hidden = true;
			var contentId = window.location.hash.toString();
			contentId = contentId.substring(2, contentId.length);
			selectArticleSort(contentId || subSonSortArr[0].id, parentId, nowPage, function(result) {
				if (result != null) {
					articleSortArr = result;
					var content = '';
					for (var i = 0; i < result.length; i++) {
						var subObj = result[i];
						content += '<li><a href="forum-details.html?' + subObj.id + '&' + encodeURI(title) + '">' + subObj.title + '</a><span>[' + subObj.addTime + ']</span></li>';
					}
					document.getElementById("line-spe-china").innerHTML = content;
					if (result.length > 10) {
						//                    $('.listRight div[class = "pages"]')[0].hidden = true
					}
				}
			});
		}
	</script>

</html>