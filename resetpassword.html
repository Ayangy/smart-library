<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="ie=edge">
		<title>湖北智库-重置密码</title>
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link rel="stylesheet" href="css/style.css">
		<style>
			html,
			body {
				background-color: #f4f4f4;
			}
		</style>
	</head>

	<body>
		<div class="top_nav">
			<ul class="top_nav_center">
				<li class="top_nav_icon webo_icon">
					<a href="https://weibo.com/#_loginLayer_1513155457173"></a>
				</li>
				<li class="top_nav_icon wechat_icon">
					<a href="#"></a>
				</li>
				<li class="top_nav_search">
					<a class="btn-search border-radius5 right" onclick="searchByContentValue()">搜索</a>
					<input type="text" class="input-230 border-radius5 right" placeholder="请输入关键字">
				</li>
				<li class="language_icon">
					<a href="#">English</a>
				</li>
				<li class="login_icon">
					<a href="#">登录</a>
				</li>
				<li class="register_icon">
					<a href="register.html">注册</a>
				</li>
			</ul>
		</div>
		<div class="index-logo">
			<div class="container clearfix">
				<div class="logo_left">
					<a href="index.html" class="top_logo"></a>
					<div class="center_url">
						<span class="zkurl">www.hbzhiku.org.cn</span>
						<span class="zkduty"></span>
					</div>
					<div class="bottom_slogan">湖北省社会科学院主办 </div>
				</div>
				<div class="banner_right">
					<img />
				</div>
			</div>
		</div>
		<div class="navbar">
			<div class="container" id="container">
				<ul>
					<li><a href="zkywList.html">智库动态</a></li>
					<li><a href="hotspots.html">决策热点</a></li>
					<li><a href="decision.html">决策调研</a></li>
					<li><a href="forum.html">智库论坛</a></li>
					<li><a href="expert.html">智库专家</a></li>
					<li><a href="organization.html">智库机构</a></li>
					<li><a href="achievements.html">智库成果</a></li>
					<li><a href="union.html">智库联盟</a></li>
					<li><a href="database.html">数据库</a></li>
				</ul>
			</div>
		</div>
		<div class="regisbox">
			<div class="regis-title">重置个人密码</div>
			<div class="regis-tips">(带<b style="color: red;">*</b>为必填项)</div>
			<ul>
				<li>
					<span class="email">&nbsp;&nbsp;<b style="color: red;">*</b>邮箱：</span>
					<input id="email" type="text" />
					<span id="emailtips" style="color:#8B8B8B; font-weight: bold;font-family: simsun;">邮箱将作为您的登录账户，提交后不可修改</span>
				</li>
				<li>
					<span class="email">&nbsp;&nbsp;<b style="color: red;">*</b>密码：</span>
					<input id="pw" type="text" />
					<span id="pwtips" style="color:#8B8B8B; font-weight: bold;font-family: simsun;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
				</li>
				<li>
					<span class="email"><b style="color: red;">*</b>确认密码：</span>
					<input id="surepw" type="text" />
					<span id="surepwtips" style="color:#8B8B8B; font-weight: bold;font-family: simsun;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
				</li>
				<li>
					<span class="codes"><b style="color: red; margin-left: 28px;">*</b>验证码：</span>
					<input id="code" class="codeinpt" type="text" />
					<img id="codeimg" src="img/code.gif" />
					<img id="newimg" class="new" src="img/new.gif" />
					<span id="codetips" style="color:#8B8B8B; font-weight: bold;font-family: simsun;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
				</li>
				<li class="user-tips">尊敬的用户,您好,为了使您在智库网有更好的体验,建议您填写以下内容。根据您填写的内容,我们将为您提供个性化定制服务。</li>
				<li>
					<input class="submitbtn" type="button" value="修改" />
				</li>
			</ul>
		</div>
		<div class="footer">
			<div class="container relative">
				<img class="logomap" src="img/bot.gif" />
				<img class="logo" src="img/bottom-logo1.png" />
				<div class="foonterMain">
					<p>鄂ICP备13008287号&nbsp;&#169;2017 湖北省社会科学院 All Rights Reserved</p>
					<p>&nbsp;&nbsp;地址：中国湖北武汉东湖路165号 湖北智库网（站）电话：027-86792500 </p>
				</div>
				<div class="ewm"><img src="img/ewm.gif">微信公众号</div>
				<script type="text/javascript">
					var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
					document.write(unescape("%3Cspan id='cnzz_stat_icon_1272826515'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s19.cnzz.com/z_stat.php%3Fid%3D1272826515%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
				</script>
			</div>
		</div>
		<!--登录盒子-->
		<div class="login-bg">
			<ul class="login-box">
				<li class="login-title">
					<span>欢迎登录湖北智库网</span>
					<span class="close-icon"></span>
				</li>
				<li class="login-username">
					<span>用户名：</span>
					<input id="username" type="text" placeholder="" />
				</li>
				<li>
					<span>密&nbsp;码：</span>
					<input id="password" type="password" />
				</li>
				<li>
					<span class="code">验证码：</span>
					<input id="codeinpts" class="codeinpt" type="text" />
					<img id="loginImg" src="img/code.gif" />
					<img id="newloginImg" class="new" src="img/new.gif" />
					<a class="forgetpw" href="findpassword.html">忘记密码?</a>
				</li>
				<li>
					<input id="loginbtn" type="button" value="登录" />
					<input id="cancelbtn" type="button" value="取消" />
				</li>
				<li class="login-tips"></li>
			</ul>
		</div>
	</body>
	<script src="js/jquery.min.js"></script>
	<script src="js/HomePage/HomePageManager.js"></script>
	<script src="js/HttpRequest.js"></script>
	<script type="text/javascript">
		window.onload = function() {
			var email = $('#email').val();
			var pw = $('#pw').val();
			$('#email').change(function() {
				var flag = isEmail($('#email').val());
				if (!flag) {
					$('#email').val('');
					$('#emailtips').html('请填写正确的邮箱格式&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
					$('#emailtips').css('color', 'red');
					return;
				} else {
					$('#emailtips').html('邮箱将作为您的登录账户,提交后不可修改');
					$('#emailtips').css('color', '#8B8B8B');
				}
			});
			$('#pw').change(function() {
				console.log($('#pw').val().length);
				var length = $('#pw').val().length;
				var regString = /[a-zA-Z]+/;
				var regNumber = /\d+/;
				if (length < 6) {
					$('#pwtips').html('请填写数字及字母,长度大于6少于12的密码');
					$('#pwtips').css('color', 'red');
				} else if (!(regNumber.test($('#pw').val()) && regString.test($('#pw').val()))) {
					console.log('判断', regNumber.test($('#pw').val()) && regString.test($('#pw').val()));
					$('#pwtips').html('密码中必须包含字母及数字&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
					$('#pwtips').css('color', 'red');
				} else {
					$('#pwtips').html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
				}
			});
			$('#surepw').change(function() {
				var pw = $('#pw').val();
				var surepw = $('#surepw').val();
				if (surepw != pw) {
					$('#surepwtips').html('两次密码不一致，请重新输入&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
					$('#surepw').val('');
					$('#surepwtips').css('color', 'red');
				} else {
					$('#surepwtips').html('&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
				}
			});
			$('#realname').change(function() {
				var realname = $('#realname').val();
				var length = realname.length;
				if (!realname) {
					$('#realnametips').html('请输入真实姓名');
					$('#realnametips').css('color', 'red');
				} else if (length >= 10) {
					$('#realnametips').html('请确认您输入的姓名合法');
					$('#realnametips').css('color', 'red');
				} else {}
			});
			$('#telephone').change(function() {
				var phone = $('#telephone').val();
				var myreg = /^(((13[0-9]{1})|(14[0-9]{1})|(17[0]{1})|(15[0-3]{1})|(15[5-9]{1})|(18[0-9]{1}))+\d{8})$/;
				var length = phone.length
				if (length) {
					$('#telephone').html('电话号码不能为空');
					$('#telephone').css('color', 'red');
				} else if (length < 11) {
					$('#telephone').html('电话号码不能少于11位');
					$('#telephone').css('color', 'red');
				} else if (!myreg.test(phone)) {
					$('#telephone').html('请输入有效的电话号码');
					$('#telephone').css('color', 'red');
				}
			});
			$('#workunit').change(function() {
				var workunit = $('#workunit').val();
				if (!workunit) {
					$('#workunit').html('请输入有效的电话号码');
					$('#workunit').css('color', 'red');
				}
			})
			$('.submitbtn').on('click', function() {
				var email = $('#email').val();
				var pw = $('#pw').val();
				var surepw = $('#surepw').val();
				var codes = $('#code').val();
				if (!email) {
					$('#emailtips').html('请填写正确的邮箱&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
					$('#emailtips').css('color', 'red');
					return;
				}
				if (!pw) {
					$('#pwtips').html('密码不能为空&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
					$('#pwtips').css('color', 'red');
					return;
				}
				if (!surepw) {
					$('#surepwtips').html('确认密码不能为空&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
					$('#surepwtips').css('color', 'red');
					return;
				}
				if (!codes) {
					$('#codetips').html('请填写验证码');
					$('#codetips').css('color', 'red');
					return;
				} else if (codes != code) {
					$('#codetips').html('验证码错误&nbsp;');
					$('#codetips').css('color', 'red');
					return;
				}
				console.log('1', email);
				console.log('2', pw);
				console.log('3', surepw);
				console.log('4', codes);
				var data = JSON.stringify({
					email: email,
					password: pw,
					//						username:
				})
				$.ajax({
					type: "post",
					url: BaseUrl + "/frontEnd/resetPwd",
					async: true,
					data: data,
					dataType: "JSON",
					contentType: 'application/json;charset=UTF-8',
					success: function(data) {
						console.log('信息', data);
						if (data.status == -1) {
							$('#email').val('');
							$('#emailtips').html(data.message + '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;');
							$('#emailtips').css('color', 'red');
						} else if (data.status == 0) {
							$('.regisbox').html('<span>修改成功</spen>');
							$('.regisbox').css('color', 'green');
							$('.regisbox').css('padding-top', '200px');
						}
					},
					error: function() {
						console.log('异常');
					}
				});
			})

			function isEmail(str) {
				reg = /^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.){1,63}[a-z0-9]+$/g
				return reg.test(str)
			}
		}
	</script>

</html>